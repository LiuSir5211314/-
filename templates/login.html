<!DOCTYPE html>
<html>
<head>
	<title>Home</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content="" />
	<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false);
	function hideURLbar(){ window.scrollTo(0,1); } </script>
	<link href="../static/css/popuo-box.css" rel="stylesheet" type="text/css" media="all" />
	<link href="../static/css/style.css" rel="stylesheet" type="text/css" media="all"/><!--style_sheet-->
	<link rel="stylesheet" href="../static/css/flexslider.css" type="text/css" media="screen" property="" />
	<link rel="stylesheet" href="../static/css/font-awesome.css"> <!-- Font-Awesome_Icons-CSS -->
    <link rel="stylesheet" href="../static/layui/css/layui.css"/>
    <script src="../static/js/jquery.min.js"></script>
    <script src="../static/layui/layui.js"></script>
</head>
<body>
<div class="w3l-head">
	<h1>端口扫描</h1>
</div>
<div class="w3l-main">
<div class="w3l-left-side">
	
<div class="flexslider">
  <ul class="slides">
    <li>
      <img src="../static/images/g5.jpg" alt="image"/>
    </li>
    <li>
      <img src="../static/images/g2.jpg" alt="image"/>
    </li>
    <li>
      <img src="../static/images/g3.jpg" alt="image"/>
    </li>
    <li>
      <img src="../static/images/g4.jpg" alt="image"/>
    </li>
	<li>
      <img src="../static/images/g1.jpg" alt="image"/>
    </li>
  </ul>
</div>
</div>

<div class="w3l-rigt-side">
	<form action="#" method="post">
		<div class="w3l-signin">
			<a class="w3_play_icon1" href="#small-dialog1">登录</a>
		</div>
		<div class="w3l-signup">
			<a class="w3_play_icon1" href="#small-dialog2">注册</a>
		</div>
		<div class="clear"></div>
	</form>	
</div>
<div class="clear"></div>
</div>

<!--sign in form -->
<div id="small-dialog1" class="mfp-hide">
	<div class="wthree-container">
		<div class="wthree-form">
			<div class="agileits-2">
				<h2>登录</h2>
			</div>
			<form >
				<div class="w3-user">
					<span><i class="fa fa-user-o" aria-hidden="true"></i></span>
					<input type="text" name="username" id="username"placeholder="账户" required="">
				</div>
				<div class="clear"></div>
				<div class="w3-psw">
					<span><i class="fa fa-key" aria-hidden="true"></i></span>
					<input type="password" name="password" id="password" placeholder="密码" required="">
				</div>
				<div class="clear"></div>
				<div class="signin">
					<input type="button" value="登录" id="login">
				</div>
				<div class="clear"></div>
			</form>
		</div>
	</div>
</div>
<div id="small-dialog2" class="mfp-hide">
	<div class="wthree-container">
		<div class="wthree-form bg">	
			<div class="agileits-2">
				<h2>注册</h2>
			</div>
			<form action="#" method="post">
				<div class="w3-user">
					<span><i class="fa fa-user-o" aria-hidden="true"></i></span>
					<input type="text" name="username" placeholder="账户" required="" id="username2">
				</div>
				<div class="clear"></div>
				<div class="w3-email">
					<span><i class="fa fa-envelope" aria-hidden="true"></i></span>
					<input type="text" name="phone" placeholder="手机" required="" id="phone"/>
				</div>
				<div class="clear"></div>
				<div class="w3-psw">
					<span><i class="fa fa-key" aria-hidden="true"></i></span>
					<input type="password" name="password" placeholder="密码" required="" id="password1">
				</div>
				<div class="w3-cpsw">
					<span><i class="fa fa-key" aria-hidden="true"></i></span>
					<input type="password" name="password" placeholder="确认密码" required="" id="password2">
				</div>
				<div class="clear"></div>
				<div class="w3l-check">
					<input type="checkbox" class="checkbox">
					<span><a href="#">我同意</a></span>
				</div>
				<div class="clear"></div>
				<div class="signin">
					<input type="button" value="立即注册" id="register">
				</div>
				<div class="clear"></div>
			</form>
		</div>
	</div>
</div>

	
<script type="text/javascript" src="../static/js/jquery-2.1.4.min.js"></script>

<!-- pop-up-box-js-file -->  
	<script src="../static/js/jquery.magnific-popup.js" type="text/javascript"></script>
<!--//pop-up-box-js-file -->
<script>
	$(document).ready(function() {
	$('.w3_play_icon,.w3_play_icon1,.w3_play_icon2').magnificPopup({
		type: 'inline',
		fixedContentPos: false,
		fixedBgPos: true,
		overflowY: 'auto',
		closeBtnInside: true,
		preloader: false,
		midClick: true,
		removalDelay: 300,
		mainClass: 'my-mfp-zoom-in'
	});
																	
	});
</script>
<!-- flexSlider -->
	<script defer src="../static/js/jquery.flexslider.js"></script>
	<script type="text/javascript">
		$(window).load(function(){
		  $('.flexslider').flexslider({
			animation: "slide",
			start: function(slider){
			  $('body').removeClass('loading');
			}
		  });
		});
	</script>
<!-- //flexSlider -->
</body>
<script>
 layui.use(['element', 'layer'], function () {
        var layer = layui.layer;
        $(function () {
            $("#login").click(function () {
                var username = $("#username").val();
                var password = $("#password").val();
                if ("" == username || undefined == username) {
                    layer.msg("账户不能为空", {icon: 7});
                    return
                }
                if ("" == password || undefined == password) {
                    layer.msg("密码不能为空", {icon: 7});
                    return
                }
                $.ajax({
                    type: 'GET',
                    url: "/user/login_check",
                    dataType: 'json', //服务端返回json格式的数据
                    data: {'username': username, 'password': password},
                    contentType: "application/json; charset=utf-8",
                    success: function (data) { // 这里的data就是返回的json格式的数据
                        window.location.href = '/index'
                    },
                    error: function (xhr, type) {
                        layer.msg("账户密码不正确！", {icon: 5});
                    }
                });

            })
            $("#register").click(function () {
                var username = $("#username2").val();
                var password1 = $("#password1").val();
                var password2 = $("#password2").val();
                var phone = $('#phone').val()
                if ("" == username || undefined == username) {
                    layer.msg("用户名不能为空", {icon: 7});
                    return
                }
                if ("" == password1 || undefined == password1 || "" == password2 || undefined == password2) {
                    layer.msg("密码不能为空", {icon: 7});
                    return
                }
                if (password1!=password2) {
                    layer.msg("两次密码不一致", {icon: 7});
                    return
                }
                if ("" == phone || undefined == phone) {
                    layer.msg("电话不能为空", {icon: 7});
                    return
                }
                $.ajax({
                    type: 'POST',
                    url: "/user/register",
                    dataType: 'json', //服务端返回json格式的数据
                    data: {'username':username,'password':password2,'phone':phone},
                    success: function (data) { // 这里的data就是返回的json格式的数据
                        layer.msg('注册成功！', {icon: 6})

                        setTimeout(function () {
                            window.location.href = "/"
                        }, 1000);

                    },
                    error: function (xhr, type) {
                        if (xhr.status == 401) {
                            layer.msg("注册失败！", {icon: 5})
                        } else if (xhr.status == 403) {
                            layer.msg('用户已存在！2s后自动跳转到登录页面', {icon: 7})
                            setTimeout(function () {
                                window.location.href = '/'
                            }, 2000)

                        }
                    }
                });

            })
        })
    })
</script>
</html>